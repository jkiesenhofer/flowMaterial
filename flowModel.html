<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Dispersed Metal Particles</title>
    <style>
        canvas {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

<canvas id="canvas" width="600" height="600"></canvas>

<script>
// Parameter
const n = 720;        // Number of particles
const width = 100;     // Width of the area (simulation units)
const minDist = 2.2;  // Minimum distance
const maxHeight = 0;  // Maximum starting height

// Canvas setup
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// Scale simulation units â†’ pixels
const scale = 8;

// List of particles
const points = [];

// Distance function
function distance(a, b) {
    return Math.hypot(a[0] - b[0], a[1] - b[1]);
}

// Drop points
for (let i = 0; i < n; i++) {
    let x = Math.random() * width;
    let y = maxHeight;

    while (true) {
        let collision = false;

        for (const [px, py] of points) {
            if (distance([x, y], [px, py]) < minDist) {
                collision = true;
                y = py + minDist; // stack on point
            }
        }

        if (!collision) break;
    }

    points.push([x, y]);
}

// Find max height
const maxY = Math.max(...points.map(p => p[1]));

// Draw points
ctx.fillStyle = "blue";

for (const [x, y] of points) {
    ctx.beginPath();
    ctx.arc(
        x * scale,
        canvas.height - (y * scale), // invert y-axis
        3,
        0,
        Math.PI * 2
    );
    ctx.fill();
}
</script>

</body>
</html>
